{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport React from 'react';\nimport ReactPlayer from 'react-player';\nimport clsx from 'clsx';\nimport { AttachmentActions as DefaultAttachmentActions } from './AttachmentActions';\nimport { Audio as DefaultAudio } from './Audio';\nimport { Card as DefaultCard } from './Card';\nimport { FileAttachment as DefaultFile } from './FileAttachment';\nimport { Gallery as DefaultGallery, ImageComponent as DefaultImage } from '../Gallery';\nexport var SUPPORTED_VIDEO_FORMATS = ['video/mp4', 'video/ogg', 'video/webm', 'video/quicktime'];\nexport var isScrapedContent = function isScrapedContent(attachment) {\n  return attachment.og_scrape_url || attachment.title_link;\n};\nexport var isUploadedImage = function isUploadedImage(attachment) {\n  return attachment.type === 'image' && !isScrapedContent(attachment);\n};\nexport var isGalleryAttachmentType = function isGalleryAttachmentType(output) {\n  return Array.isArray(output.images);\n};\nexport var isAudioAttachment = function isAudioAttachment(attachment) {\n  return attachment.type === 'audio';\n};\nexport var isFileAttachment = function isFileAttachment(attachment) {\n  return attachment.type === 'file' || attachment.mime_type && SUPPORTED_VIDEO_FORMATS.indexOf(attachment.mime_type) === -1 && attachment.type !== 'video';\n};\nexport var isMediaAttachment = function isMediaAttachment(attachment) {\n  return attachment.mime_type && SUPPORTED_VIDEO_FORMATS.indexOf(attachment.mime_type) !== -1 || attachment.type === 'video';\n};\nexport var isSvgAttachment = function isSvgAttachment(attachment) {\n  var filename = attachment.fallback || '';\n  return filename.toLowerCase().endsWith('.svg');\n};\n/**\n * @deprecated will be removed in the next major release,\n * replaced with the proper component equivalent `AttachmentContainer/AttachmentWithinContainer`\n */\nexport var renderAttachmentWithinContainer = function renderAttachmentWithinContainer(props) {\n  var _a;\n  var _b;\n  var attachment = props.attachment,\n    children = props.children,\n    componentType = props.componentType;\n  var isGAT = isGalleryAttachmentType(attachment);\n  var extra = '';\n  if (!isGAT) {\n    extra = componentType === 'card' && !(attachment === null || attachment === void 0 ? void 0 : attachment.image_url) && !(attachment === null || attachment === void 0 ? void 0 : attachment.thumb_url) ? 'no-image' : ((_b = attachment === null || attachment === void 0 ? void 0 : attachment.actions) === null || _b === void 0 ? void 0 : _b.length) ? 'actions' : '';\n  }\n  var classNames = clsx('str-chat__message-attachment', (_a = {}, _a[\"str-chat__message-attachment--\".concat(componentType)] = componentType, _a[\"str-chat__message-attachment--\".concat(attachment === null || attachment === void 0 ? void 0 : attachment.type)] = attachment === null || attachment === void 0 ? void 0 : attachment.type, _a[\"str-chat__message-attachment--\".concat(componentType, \"--\").concat(extra)] = componentType && extra, _a['str-chat__message-attachment--svg-image'] = isSvgAttachment(attachment), _a['str-chat__message-attachment-with-actions'] = extra === 'actions', _a));\n  return React.createElement(\"div\", {\n    className: classNames\n  }, children);\n};\n/**\n * @deprecated will be removed in the next major release,\n * replaced with the proper component equivalent `AttachmentContainer/AttachmentActionsContainer`\n */\nexport var renderAttachmentActions = function renderAttachmentActions(props) {\n  var _a;\n  var _actionHandler = props.actionHandler,\n    attachment = props.attachment,\n    _b = props.AttachmentActions,\n    AttachmentActions = _b === void 0 ? DefaultAttachmentActions : _b;\n  if (!((_a = attachment.actions) === null || _a === void 0 ? void 0 : _a.length)) return null;\n  return React.createElement(AttachmentActions, __assign({}, attachment, {\n    actionHandler: function actionHandler(event, name, value) {\n      return _actionHandler === null || _actionHandler === void 0 ? void 0 : _actionHandler(event, name, value);\n    },\n    actions: attachment.actions,\n    id: attachment.id || '',\n    key: \"key-actions-\".concat(attachment.id),\n    text: attachment.text || ''\n  }));\n};\n/**\n * @deprecated will be removed in the next major release,\n * replaced with the proper component equivalent `AttachmentContainer/GalleryContainer`\n */\nexport var renderGallery = function renderGallery(props) {\n  var attachment = props.attachment,\n    _a = props.Gallery,\n    Gallery = _a === void 0 ? DefaultGallery : _a;\n  return renderAttachmentWithinContainer({\n    attachment: attachment,\n    children: React.createElement(Gallery, {\n      images: attachment.images || [],\n      key: 'gallery'\n    }),\n    componentType: 'gallery'\n  });\n};\n/**\n * @deprecated will be removed in the next major release,\n * replaced with the proper component equivalent `AttachmentContainer/ImageContainer`\n */\nexport var renderImage = function renderImage(props) {\n  var attachment = props.attachment,\n    _a = props.Image,\n    Image = _a === void 0 ? DefaultImage : _a;\n  if (attachment.actions && attachment.actions.length) {\n    return renderAttachmentWithinContainer({\n      attachment: attachment,\n      children: React.createElement(\"div\", {\n        className: 'str-chat__attachment',\n        key: \"key-image-\".concat(attachment.id)\n      }, React.createElement(Image, __assign({}, attachment)), renderAttachmentActions(props)),\n      componentType: 'image'\n    });\n  }\n  return renderAttachmentWithinContainer({\n    attachment: attachment,\n    children: React.createElement(Image, __assign({}, attachment, {\n      key: \"key-image-\".concat(attachment.id)\n    })),\n    componentType: 'image'\n  });\n};\n/**\n * @deprecated will be removed in the next major release,\n * replaced with the proper component equivalent `AttachmentContainer/CardContainer`\n */\nexport var renderCard = function renderCard(props) {\n  var attachment = props.attachment,\n    _a = props.Card,\n    Card = _a === void 0 ? DefaultCard : _a;\n  if (attachment.actions && attachment.actions.length) {\n    return renderAttachmentWithinContainer({\n      attachment: attachment,\n      children: React.createElement(\"div\", {\n        className: 'str-chat__attachment',\n        key: \"key-image-\".concat(attachment.id)\n      }, React.createElement(Card, __assign({}, attachment, {\n        key: \"key-card-\".concat(attachment.id)\n      })), renderAttachmentActions(props)),\n      componentType: 'card'\n    });\n  }\n  return renderAttachmentWithinContainer({\n    attachment: attachment,\n    children: React.createElement(Card, __assign({}, attachment, {\n      key: \"key-card-\".concat(attachment.id)\n    })),\n    componentType: 'card'\n  });\n};\n/**\n * @deprecated will be removed in the next major release,\n * replaced with the proper component equivalent `AttachmentContainer/FileContainer`\n */\nexport var renderFile = function renderFile(props) {\n  var attachment = props.attachment,\n    _a = props.File,\n    File = _a === void 0 ? DefaultFile : _a;\n  if (!attachment.asset_url) return null;\n  return renderAttachmentWithinContainer({\n    attachment: attachment,\n    children: React.createElement(File, {\n      attachment: attachment,\n      key: \"key-file-\".concat(attachment.id)\n    }),\n    componentType: 'file'\n  });\n};\n/**\n * @deprecated will be removed in the next major release,\n * replaced with the proper component equivalent `AttachmentContainer/AudioContainer`\n */\nexport var renderAudio = function renderAudio(props) {\n  var attachment = props.attachment,\n    _a = props.Audio,\n    Audio = _a === void 0 ? DefaultAudio : _a;\n  return renderAttachmentWithinContainer({\n    attachment: attachment,\n    children: React.createElement(\"div\", {\n      className: 'str-chat__attachment',\n      key: \"key-video-\".concat(attachment.id)\n    }, React.createElement(Audio, {\n      og: attachment\n    })),\n    componentType: 'audio'\n  });\n};\n/**\n * @deprecated will be removed in the next major release,\n * replaced with the proper component equivalent `AttachmentContainer/MediaContainer`\n */\nexport var renderMedia = function renderMedia(props) {\n  var _a;\n  var attachment = props.attachment,\n    _b = props.Media,\n    Media = _b === void 0 ? ReactPlayer : _b;\n  if ((_a = attachment.actions) === null || _a === void 0 ? void 0 : _a.length) {\n    return renderAttachmentWithinContainer({\n      attachment: attachment,\n      children: React.createElement(\"div\", {\n        className: 'str-chat__attachment str-chat__attachment-media',\n        key: \"key-video-\".concat(attachment.id)\n      }, React.createElement(\"div\", {\n        className: 'str-chat__player-wrapper'\n      }, React.createElement(Media, {\n        className: 'react-player',\n        controls: true,\n        height: '100%',\n        url: attachment.asset_url,\n        width: '100%'\n      })), renderAttachmentActions(props)),\n      componentType: 'media'\n    });\n  }\n  return renderAttachmentWithinContainer({\n    attachment: attachment,\n    children: React.createElement(\"div\", {\n      className: 'str-chat__player-wrapper',\n      key: \"key-video-\".concat(attachment.id)\n    }, React.createElement(Media, {\n      className: 'react-player',\n      controls: true,\n      height: '100%',\n      url: attachment.asset_url,\n      width: '100%'\n    })),\n    componentType: 'media'\n  });\n};","map":null,"metadata":{},"sourceType":"module"}