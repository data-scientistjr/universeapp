{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function sent() {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nimport i18n from 'i18next';\nimport Dayjs from 'dayjs';\nimport calendar from 'dayjs/plugin/calendar';\nimport updateLocale from 'dayjs/plugin/updateLocale';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport localeData from 'dayjs/plugin/localeData';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport { deTranslations, enTranslations, esTranslations, frTranslations, hiTranslations, itTranslations, jaTranslations, koTranslations, nlTranslations, ptTranslations, ruTranslations, trTranslations } from './translations';\nvar defaultNS = 'translation';\nvar defaultLng = 'en';\nimport 'dayjs/locale/de';\nimport 'dayjs/locale/es';\nimport 'dayjs/locale/fr';\nimport 'dayjs/locale/hi';\nimport 'dayjs/locale/it';\nimport 'dayjs/locale/ja';\nimport 'dayjs/locale/ko';\nimport 'dayjs/locale/nl';\nimport 'dayjs/locale/pt';\nimport 'dayjs/locale/ru';\nimport 'dayjs/locale/tr';\n// These locale imports also set these locale globally.\n// So As a last step I am going to import english locale\n// to make sure I don't mess up language at other places in app.\nimport 'dayjs/locale/en';\nDayjs.extend(updateLocale);\nDayjs.updateLocale('de', {\n  calendar: {\n    lastDay: '[gestern um] LT',\n    lastWeek: '[letzten] dddd [um] LT',\n    nextDay: '[morgen um] LT',\n    nextWeek: 'dddd [um] LT',\n    sameDay: '[heute um] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('es', {\n  calendar: {\n    lastDay: '[ayer a las] LT',\n    lastWeek: '[pasado] dddd [a] LT',\n    nextDay: '[mañana a] LT',\n    nextWeek: 'dddd [a] LT',\n    sameDay: '[hoy a las] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('fr', {\n  calendar: {\n    lastDay: '[Hier à] LT',\n    lastWeek: 'dddd [dernier à] LT',\n    nextDay: '[Demain à] LT',\n    nextWeek: 'dddd [à] LT',\n    sameDay: '[Aujourd’hui à] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('hi', {\n  calendar: {\n    lastDay: '[कल] LT',\n    lastWeek: '[पिछले] dddd, LT',\n    nextDay: '[कल] LT',\n    nextWeek: 'dddd, LT',\n    sameDay: '[आज] LT',\n    sameElse: 'L'\n  },\n  // Hindi notation for meridiems are quite fuzzy in practice. While there exists\n  // a rigid notion of a 'Pahar' it is not used as rigidly in modern Hindi.\n  meridiem: function meridiem(hour) {\n    if (hour < 4) {\n      return 'रात';\n    } else if (hour < 10) {\n      return 'सुबह';\n    } else if (hour < 17) {\n      return 'दोपहर';\n    } else if (hour < 20) {\n      return 'शाम';\n    } else {\n      return 'रात';\n    }\n  },\n  meridiemHour: function meridiemHour(hour, meridiem) {\n    if (hour === 12) {\n      hour = 0;\n    }\n    if (meridiem === 'रात') {\n      return hour < 4 ? hour : hour + 12;\n    } else if (meridiem === 'सुबह') {\n      return hour;\n    } else if (meridiem === 'दोपहर') {\n      return hour >= 10 ? hour : hour + 12;\n    } else if (meridiem === 'शाम') {\n      return hour + 12;\n    }\n    return hour;\n  },\n  meridiemParse: /रात|सुबह|दोपहर|शाम/\n});\nDayjs.updateLocale('it', {\n  calendar: {\n    lastDay: '[Ieri alle] LT',\n    lastWeek: '[lo scorso] dddd [alle] LT',\n    nextDay: '[Domani alle] LT',\n    nextWeek: 'dddd [alle] LT',\n    sameDay: '[Oggi alle] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('ja', {\n  calendar: {\n    lastDay: '[昨日] LT',\n    lastWeek: 'dddd LT',\n    nextDay: '[明日] LT',\n    nextWeek: '[次の] dddd LT',\n    sameDay: '[今日] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('ko', {\n  calendar: {\n    lastDay: '[어제] LT',\n    lastWeek: '[지난] dddd LT',\n    nextDay: '[내일] LT',\n    nextWeek: 'dddd LT',\n    sameDay: '[오늘] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('nl', {\n  calendar: {\n    lastDay: '[gisteren om] LT',\n    lastWeek: '[afgelopen] dddd [om] LT',\n    nextDay: '[morgen om] LT',\n    nextWeek: 'dddd [om] LT',\n    sameDay: '[vandaag om] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('pt', {\n  calendar: {\n    lastDay: '[ontem às] LT',\n    lastWeek: 'dddd [passada às] LT',\n    nextDay: '[amanhã às] LT',\n    nextWeek: 'dddd [às] LT',\n    sameDay: '[hoje às] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('ru', {\n  calendar: {\n    lastDay: '[Вчера, в] LT',\n    nextDay: '[Завтра, в] LT',\n    sameDay: '[Сегодня, в] LT'\n  }\n});\nDayjs.updateLocale('tr', {\n  calendar: {\n    lastDay: '[dün] LT',\n    lastWeek: '[geçen] dddd [saat] LT',\n    nextDay: '[yarın saat] LT',\n    nextWeek: '[gelecek] dddd [saat] LT',\n    sameDay: '[bugün saat] LT',\n    sameElse: 'L'\n  }\n});\nvar en_locale = {\n  formats: {},\n  months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n  relativeTime: {},\n  weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\n};\n// Type guards to check DayJs\nvar isDayJs = function isDayJs(dateTimeParser) {\n  return dateTimeParser.extend !== undefined;\n};\n/**\n * Wrapper around [i18next](https://www.i18next.com/) class for Stream related translations.\n * Instance of this class should be provided to Chat component to handle translations.\n * Stream provides following list of in-built translations:\n * 1. English (en)\n * 2. Dutch (nl)\n * 3. Russian (ru)\n * 4. Turkish (tr)\n * 5. French (fr)\n * 6. Italian (it)\n * 7. Hindi (hi)\n * 8. Spanish (es)\n * 9. Portuguese (pt)\n * 10. German (de)\n * 11. Japanese (ja)\n * 12. Korean (ko)\n *\n * Simplest way to start using chat components in one of the in-built languages would be following:\n *\n * ```\n * const i18n = new Streami18n({ language 'nl' });\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * If you would like to override certain keys in in-built translation.\n * UI will be automatically updated in this case.\n *\n * ```\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  translationsForLanguage: {\n *    'Nothing yet...': 'Nog Niet ...',\n *    '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} en {{ secondUser }} zijn aan het typen...',\n *  }\n * });\n *\n * If you would like to register additional languages, use registerTranslation. You can add as many languages as you want:\n *\n * i18n.registerTranslation('zh', {\n *  'Nothing yet...': 'Nog Niet ...',\n *  '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} en {{ secondUser }} zijn aan het typen...',\n * });\n *\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * You can use the same function to add whole new language as well.\n *\n * ```\n * const i18n = new Streami18n();\n *\n * i18n.registerTranslation('mr', {\n *  'Nothing yet...': 'काहीही नाही  ...',\n *  '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} आणि {{ secondUser }} टीपी करत आहेत ',\n * });\n *\n * // Make sure to call setLanguage to reflect new language in UI.\n * i18n.setLanguage('it');\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * ## Datetime translations\n *\n * Stream react chat components uses [dayjs](https://day.js.org/en/) internally by default to format datetime stamp.\n * e.g., in ChannelPreview, MessageContent components.\n * Dayjs has locale support as well - https://day.js.org/docs/en/i18n/i18n\n * Dayjs is a lightweight alternative to Momentjs with the same modern API.\n *\n * Dayjs provides locale config for plenty of languages, you can check the whole list of locale configs at following url\n * https://github.com/iamkun/dayjs/tree/dev/src/locale\n *\n * You can either provide the dayjs locale config while registering\n * language with Streami18n (either via constructor or registerTranslation()) or you can provide your own Dayjs or Moment instance\n * to Streami18n constructor, which will be then used internally (using the language locale) in components.\n *\n * 1. Via language registration\n *\n * e.g.,\n * ```\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  dayjsLocaleConfigForLanguage: {\n *    months: [...],\n *    monthsShort: [...],\n *    calendar: {\n *      sameDay: ...'\n *    }\n *  }\n * });\n * ```\n *\n * Similarly, you can add locale config for moment while registering translation via `registerTranslation` function.\n *\n * e.g.,\n * ```\n * const i18n = new Streami18n();\n *\n * i18n.registerTranslation(\n *  'mr',\n *  {\n *    'Nothing yet...': 'काहीही नाही  ...',\n *    '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} आणि {{ secondUser }} टीपी करत आहेत ',\n *  },\n *  {\n *    months: [...],\n *    monthsShort: [...],\n *    calendar: {\n *      sameDay: ...'\n *    }\n *  }\n * );\n *```\n * 2. Provide your own Moment object\n *\n * ```js\n * import 'moment/locale/nl';\n * import 'moment/locale/it';\n * // or if you want to include all locales\n * import 'moment/min/locales';\n *\n * import Moment from moment\n *\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  DateTimeParser: Moment\n * })\n * ```\n *\n * 3. Provide your own Dayjs object\n *\n * ```js\n * import Dayjs from 'dayjs'\n *\n * import 'dayjs/locale/nl';\n * import 'dayjs/locale/it';\n * // or if you want to include all locales\n * import 'dayjs/min/locales';\n *\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  DateTimeParser: Dayjs\n * })\n * ```\n * If you would like to stick with english language for datetimes in Stream components, you can set `disableDateTimeTranslations` to true.\n *\n */\nvar defaultStreami18nOptions = {\n  DateTimeParser: Dayjs,\n  dayjsLocaleConfigForLanguage: null,\n  debug: false,\n  disableDateTimeTranslations: false,\n  language: 'en',\n  logger: function logger(message) {\n    return console.warn(message);\n  }\n};\nexport var defaultTranslatorFunction = function defaultTranslatorFunction(key) {\n  return key;\n};\nvar Streami18n = /** @class */function () {\n  /**\n   * Constructor accepts following options:\n   *  - language (String) default: 'en'\n   *    Language code e.g., en, tr\n   *\n   *  - translationsForLanguage (object)\n   *    Translations object. Please check src/i18n/en.json for example.\n   *\n   *  - disableDateTimeTranslations (boolean) default: false\n   *    Disable translations for date-times\n   *\n   *  - debug (boolean) default: false\n   *    Enable debug mode in internal i18n class\n   *\n   *  - logger (function) default: () => {}\n   *    Logger function to log warnings/errors from this class\n   *\n   *  - dayjsLocaleConfigForLanguage (object) default: 'enConfig'\n   *    [Config object](https://momentjs.com/docs/#/i18n/changing-locale/) for internal moment object,\n   *    corresponding to language (param)\n   *\n   *  - DateTimeParser (function) Moment or Dayjs instance/function.\n   *    Make sure to load all the required locales in this Moment or Dayjs instance that you will be provide to Streami18n\n   *\n   * @param {*} options\n   */\n  function Streami18n(options) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n    if (options === void 0) {\n      options = {};\n    }\n    var _this = this;\n    this.i18nInstance = i18n.createInstance();\n    this.Dayjs = null;\n    this.setLanguageCallback = function () {\n      return null;\n    };\n    this.initialized = false;\n    this.t = defaultTranslatorFunction;\n    this.translations = {\n      de: (_a = {}, _a[defaultNS] = deTranslations, _a),\n      en: (_b = {}, _b[defaultNS] = enTranslations, _b),\n      es: (_c = {}, _c[defaultNS] = esTranslations, _c),\n      fr: (_d = {}, _d[defaultNS] = frTranslations, _d),\n      hi: (_e = {}, _e[defaultNS] = hiTranslations, _e),\n      it: (_f = {}, _f[defaultNS] = itTranslations, _f),\n      ja: (_g = {}, _g[defaultNS] = jaTranslations, _g),\n      ko: (_h = {}, _h[defaultNS] = koTranslations, _h),\n      nl: (_j = {}, _j[defaultNS] = nlTranslations, _j),\n      pt: (_k = {}, _k[defaultNS] = ptTranslations, _k),\n      ru: (_l = {}, _l[defaultNS] = ruTranslations, _l),\n      tr: (_m = {}, _m[defaultNS] = trTranslations, _m)\n    };\n    /**\n     * dayjs.defineLanguage('nl') also changes the global locale. We don't want to do that\n     * when user calls registerTranslation() function. So instead we will store the locale configs\n     * given to registerTranslation() function in `dayjsLocales` object, and register the required locale\n     * with moment, when setLanguage is called.\n     * */\n    this.dayjsLocales = {};\n    this.localeExists = function (language) {\n      if (_this.isCustomDateTimeParser) return true;\n      return Object.keys(Dayjs.Ls).indexOf(language) > -1;\n    };\n    this.validateCurrentLanguage = function () {\n      var availableLanguages = Object.keys(_this.translations);\n      if (availableLanguages.indexOf(_this.currentLanguage) === -1) {\n        _this.logger(\"Streami18n: '\".concat(_this.currentLanguage, \"' language is not registered.\") + \" Please make sure to call streami18n.registerTranslation('\".concat(_this.currentLanguage, \"', {...}) or \") + \"use one the built-in supported languages - \".concat(_this.getAvailableLanguages()));\n        _this.currentLanguage = defaultLng;\n      }\n    };\n    /** Returns an instance of i18next used within this class instance */\n    this.geti18Instance = function () {\n      return _this.i18nInstance;\n    };\n    /** Returns list of available languages. */\n    this.getAvailableLanguages = function () {\n      return Object.keys(_this.translations);\n    };\n    /** Returns all the translation dictionary for all inbuilt-languages */\n    this.getTranslations = function () {\n      return _this.translations;\n    };\n    var finalOptions = __assign(__assign({}, defaultStreami18nOptions), options);\n    // Prepare the i18next configuration.\n    this.logger = finalOptions.logger;\n    this.currentLanguage = finalOptions.language;\n    this.DateTimeParser = finalOptions.DateTimeParser;\n    try {\n      if (this.DateTimeParser && isDayJs(this.DateTimeParser)) {\n        this.DateTimeParser.extend(LocalizedFormat);\n        this.DateTimeParser.extend(calendar);\n        this.DateTimeParser.extend(localeData);\n        this.DateTimeParser.extend(relativeTime);\n      }\n    } catch (error) {\n      throw Error(\"Streami18n: Looks like you wanted to provide Dayjs instance, but something went wrong while adding plugins \".concat(error));\n    }\n    this.isCustomDateTimeParser = !!options.DateTimeParser;\n    var translationsForLanguage = finalOptions.translationsForLanguage;\n    if (translationsForLanguage) {\n      this.translations[this.currentLanguage] = (_o = {}, _o[defaultNS] = this.translations[this.currentLanguage] && this.translations[this.currentLanguage][defaultNS] ? __assign(__assign({}, this.translations[this.currentLanguage][defaultNS]), translationsForLanguage) : translationsForLanguage, _o);\n    }\n    // If translations don't exist for given language, then set it as empty object.\n    if (!this.translations[this.currentLanguage]) {\n      this.translations[this.currentLanguage] = (_p = {}, _p[defaultNS] = {}, _p);\n    }\n    this.i18nextConfig = {\n      debug: finalOptions.debug,\n      fallbackLng: false,\n      interpolation: {\n        escapeValue: false\n      },\n      keySeparator: false,\n      lng: this.currentLanguage,\n      nsSeparator: false,\n      parseMissingKeyHandler: function parseMissingKeyHandler(key) {\n        _this.logger(\"Streami18n: Missing translation for key: \".concat(key));\n        return key;\n      }\n    };\n    this.validateCurrentLanguage();\n    var dayjsLocaleConfigForLanguage = finalOptions.dayjsLocaleConfigForLanguage;\n    if (dayjsLocaleConfigForLanguage) {\n      this.addOrUpdateLocale(this.currentLanguage, __assign({}, dayjsLocaleConfigForLanguage));\n    } else if (!this.localeExists(this.currentLanguage)) {\n      this.logger(\"Streami18n: Streami18n(...) - Locale config for \".concat(this.currentLanguage, \" does not exist in momentjs.\") + \"Please import the locale file using \\\"import 'moment/locale/\".concat(this.currentLanguage, \"';\\\" in your app or \") + \"register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)\");\n    }\n    this.tDateTimeParser = function (timestamp) {\n      if (finalOptions.disableDateTimeTranslations || !_this.localeExists(_this.currentLanguage)) {\n        /**\n         * TS needs to know which is being called to accept the chain call\n         */\n        if (isDayJs(_this.DateTimeParser)) {\n          return _this.DateTimeParser(timestamp).locale(defaultLng);\n        }\n        return _this.DateTimeParser(timestamp).locale(defaultLng);\n      }\n      if (isDayJs(_this.DateTimeParser)) {\n        return _this.DateTimeParser(timestamp).locale(_this.currentLanguage);\n      }\n      return _this.DateTimeParser(timestamp).locale(_this.currentLanguage);\n    };\n  }\n  /**\n   * Initializes the i18next instance with configuration (which enables natural language as default keys)\n   */\n  Streami18n.prototype.init = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, error_1;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            this.validateCurrentLanguage();\n            _b.label = 1;\n          case 1:\n            _b.trys.push([1, 3,, 4]);\n            _a = this;\n            return [4 /*yield*/, this.i18nInstance.init(__assign(__assign({}, this.i18nextConfig), {\n              lng: this.currentLanguage,\n              resources: this.translations\n            }))];\n          case 2:\n            _a.t = _b.sent();\n            this.initialized = true;\n            return [3 /*break*/, 4];\n          case 3:\n            error_1 = _b.sent();\n            this.logger(\"Something went wrong with init: \".concat(JSON.stringify(error_1)));\n            return [3 /*break*/, 4];\n          case 4:\n            return [2 /*return*/, {\n              t: this.t,\n              tDateTimeParser: this.tDateTimeParser\n            }];\n        }\n      });\n    });\n  };\n  /**\n   * Returns current version translator function.\n   */\n  Streami18n.prototype.getTranslators = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!!this.initialized) return [3 /*break*/, 2];\n            if (this.dayjsLocales[this.currentLanguage]) {\n              this.addOrUpdateLocale(this.currentLanguage, this.dayjsLocales[this.currentLanguage]);\n            }\n            return [4 /*yield*/, this.init()];\n          case 1:\n            return [2 /*return*/, _a.sent()];\n          case 2:\n            return [2 /*return*/, {\n              t: this.t,\n              tDateTimeParser: this.tDateTimeParser\n            }];\n        }\n      });\n    });\n  };\n  Streami18n.prototype.registerTranslation = function (language, translation, customDayjsLocale) {\n    var _a;\n    if (!translation) {\n      this.logger(\"Streami18n: registerTranslation(language, translation, customDayjsLocale) called without translation\");\n      return;\n    }\n    if (!this.translations[language]) {\n      this.translations[language] = (_a = {}, _a[defaultNS] = translation, _a);\n    } else {\n      this.translations[language][defaultNS] = translation;\n    }\n    if (customDayjsLocale) {\n      this.dayjsLocales[language] = __assign({}, customDayjsLocale);\n    } else if (!this.localeExists(language)) {\n      this.logger(\"Streami18n: registerTranslation(language, translation, customDayjsLocale) - \" + \"Locale config for \".concat(language, \" does not exist in Dayjs.\") + \"Please import the locale file using \\\"import 'dayjs/locale/\".concat(language, \"';\\\" in your app or \") + \"register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)\");\n    }\n    if (this.initialized) {\n      this.i18nInstance.addResources(language, defaultNS, translation);\n    }\n  };\n  Streami18n.prototype.addOrUpdateLocale = function (key, config) {\n    if (this.localeExists(key)) {\n      Dayjs.updateLocale(key, __assign({}, config));\n    } else {\n      // Merging the custom locale config with en config, so missing keys can default to english.\n      Dayjs.locale(__assign(__assign({\n        name: key\n      }, en_locale), config), undefined, true);\n    }\n  };\n  Streami18n.prototype.setLanguage = function (language) {\n    return __awaiter(this, void 0, void 0, function () {\n      var t, error_2;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            this.currentLanguage = language;\n            if (!this.initialized) return [2 /*return*/];\n            _a.label = 1;\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n            return [4 /*yield*/, this.i18nInstance.changeLanguage(language)];\n          case 2:\n            t = _a.sent();\n            if (this.dayjsLocales[language]) {\n              this.addOrUpdateLocale(this.currentLanguage, this.dayjsLocales[this.currentLanguage]);\n            }\n            this.setLanguageCallback(t);\n            return [2 /*return*/, t];\n          case 3:\n            error_2 = _a.sent();\n            this.logger(\"Failed to set language: \".concat(JSON.stringify(error_2)));\n            return [2 /*return*/, this.t];\n          case 4:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  Streami18n.prototype.registerSetLanguageCallback = function (callback) {\n    this.setLanguageCallback = callback;\n  };\n  return Streami18n;\n}();\nexport { Streami18n };","map":null,"metadata":{},"sourceType":"module"}