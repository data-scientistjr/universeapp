{"ast":null,"code":"import { useMemo } from 'react';\nimport { getGroupStyles, insertIntro, processMessages } from '../utils';\nimport { useChatContext } from '../../../context/ChatContext';\nimport { useComponentContext } from '../../../context/ComponentContext';\nexport var useEnrichedMessages = function useEnrichedMessages(args) {\n  var channel = args.channel,\n    disableDateSeparator = args.disableDateSeparator,\n    groupStyles = args.groupStyles,\n    headerPosition = args.headerPosition,\n    hideDeletedMessages = args.hideDeletedMessages,\n    hideNewMessageSeparator = args.hideNewMessageSeparator,\n    messages = args.messages,\n    noGroupByUser = args.noGroupByUser;\n  var client = useChatContext('useEnrichedMessages').client;\n  var HeaderComponent = useComponentContext('useEnrichedMessages').HeaderComponent;\n  var lastRead = useMemo(function () {\n    var _a;\n    return (_a = channel.lastRead) === null || _a === void 0 ? void 0 : _a.call(channel);\n  }, [channel]);\n  var enableDateSeparator = !disableDateSeparator;\n  var messagesWithDates = !enableDateSeparator && !hideDeletedMessages && hideNewMessageSeparator ? messages : processMessages({\n    enableDateSeparator: enableDateSeparator,\n    hideDeletedMessages: hideDeletedMessages,\n    hideNewMessageSeparator: hideNewMessageSeparator,\n    lastRead: lastRead,\n    messages: messages,\n    userId: client.userID || ''\n  });\n  if (HeaderComponent) {\n    messagesWithDates = insertIntro(messagesWithDates, headerPosition);\n  }\n  var groupStylesFn = groupStyles || getGroupStyles;\n  var messageGroupStyles = useMemo(function () {\n    return messagesWithDates.reduce(function (acc, message, i) {\n      var style = groupStylesFn(message, messagesWithDates[i - 1], messagesWithDates[i + 1], noGroupByUser);\n      if (style) acc[message.id] = style;\n      return acc;\n    }, {});\n  }, [messagesWithDates, noGroupByUser]);\n  return {\n    messageGroupStyles: messageGroupStyles,\n    messages: messagesWithDates\n  };\n};","map":null,"metadata":{},"sourceType":"module"}