{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sanitizeUrl = void 0;\nvar invalidProtocolRegex = /^([^\\w]*)(javascript|data|vbscript)/im;\nvar htmlEntitiesRegex = /&#(\\w+)(^\\w|;)?/g;\nvar htmlCtrlEntityRegex = /&(newline|tab);/gi;\nvar ctrlCharactersRegex = /[\\u0000-\\u001F\\u007F-\\u009F\\u2000-\\u200D\\uFEFF]/gim;\nvar urlSchemeRegex = /^.+(:|&colon;)/gim;\nvar relativeFirstCharacters = [\".\", \"/\"];\nfunction isRelativeUrlWithoutProtocol(url) {\n  return relativeFirstCharacters.indexOf(url[0]) > -1;\n}\n// adapted from https://stackoverflow.com/a/29824550/2601552\nfunction decodeHtmlCharacters(str) {\n  return str.replace(htmlEntitiesRegex, function (match, dec) {\n    return String.fromCharCode(dec);\n  });\n}\nfunction sanitizeUrl(url) {\n  var sanitizedUrl = decodeHtmlCharacters(url || \"\").replace(htmlCtrlEntityRegex, \"\").replace(ctrlCharactersRegex, \"\").trim();\n  if (!sanitizedUrl) {\n    return \"about:blank\";\n  }\n  if (isRelativeUrlWithoutProtocol(sanitizedUrl)) {\n    return sanitizedUrl;\n  }\n  var urlSchemeParseResults = sanitizedUrl.match(urlSchemeRegex);\n  if (!urlSchemeParseResults) {\n    return sanitizedUrl;\n  }\n  var urlScheme = urlSchemeParseResults[0];\n  if (invalidProtocolRegex.test(urlScheme)) {\n    return \"about:blank\";\n  }\n  return sanitizedUrl;\n}\nexports.sanitizeUrl = sanitizeUrl;","map":null,"metadata":{},"sourceType":"script"}