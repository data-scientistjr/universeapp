{"ast":null,"code":"import React, { useEffect, useState } from 'react';\nimport { getWholeChar } from '../../utils';\n/**\n * A round avatar image with fallback to username's first letter\n */\nexport var Avatar = function Avatar(props) {\n  var image = props.image,\n    name = props.name,\n    _a = props.onClick,\n    onClick = _a === void 0 ? function () {\n      return undefined;\n    } : _a,\n    _b = props.onMouseOver,\n    onMouseOver = _b === void 0 ? function () {\n      return undefined;\n    } : _b,\n    _c = props.shape,\n    shape = _c === void 0 ? 'circle' : _c,\n    _d = props.size,\n    size = _d === void 0 ? 32 : _d;\n  var _e = useState(false),\n    error = _e[0],\n    setError = _e[1];\n  var _f = useState(false),\n    loaded = _f[0],\n    setLoaded = _f[1];\n  useEffect(function () {\n    setError(false);\n    setLoaded(false);\n  }, [image]);\n  var nameStr = (name === null || name === void 0 ? void 0 : name.toString()) || '';\n  var initials = getWholeChar(nameStr, 0);\n  return React.createElement(\"div\", {\n    className: \"str-chat__avatar str-chat__avatar--\".concat(shape, \" str-chat__message-sender-avatar\"),\n    \"data-testid\": 'avatar',\n    onClick: onClick,\n    onMouseOver: onMouseOver,\n    style: {\n      flexBasis: \"\".concat(size, \"px\"),\n      fontSize: \"\".concat(size / 2, \"px\"),\n      height: \"\".concat(size, \"px\"),\n      lineHeight: \"\".concat(size, \"px\"),\n      width: \"\".concat(size, \"px\")\n    },\n    title: name\n  }, image && !error ? React.createElement(\"img\", {\n    alt: initials,\n    className: \"str-chat__avatar-image\".concat(loaded ? ' str-chat__avatar-image--loaded' : ''),\n    \"data-testid\": 'avatar-img',\n    onError: function onError() {\n      return setError(true);\n    },\n    onLoad: function onLoad() {\n      return setLoaded(true);\n    },\n    src: image,\n    style: {\n      flexBasis: \"\".concat(size, \"px\"),\n      height: \"\".concat(size, \"px\"),\n      objectFit: 'cover',\n      width: \"\".concat(size, \"px\")\n    }\n  }) : React.createElement(\"div\", {\n    className: 'str-chat__avatar-fallback',\n    \"data-testid\": 'avatar-fallback'\n  }, initials));\n};","map":null,"metadata":{},"sourceType":"module"}